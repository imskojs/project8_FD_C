<ion-view id="event-detail"
  cache-view="true"
  hide-back-button="true"
  >
  <ion-nav-buttons side="left">
    <button class="button button-icon icon ion-android-arrow-back"
    ng-click="goBack()"
    >
    </button>
  </ion-nav-buttons>
  <ion-nav-title>
    <div class="row zero flex h44px">
      <img class="h24px"
      src="img/header_logo.png"
      >
    </div>
  </ion-nav-title>
  <ion-content class="bottom44px black-bg"
    scrollbar-y="false"
  >

    <!-- Loading overlay -->
    <div class="w100p h95vh flex light-grey-bg absolute"
      style="z-index: 2"
      ng-if="EventDetail.Model.loading"
      >
      <ion-spinner class="spinner-40px mb88px" icon="ripple">
      </ion-spinner>
    </div>

    <!-- img -->
    <img class="w100p block" alt="이벤트 이미지"
      ng-src="{{EventDetail.Model.event.photos[0].url | Cloudinary600}}"
    >
    <div class="row flex-v h30px zero pl5p mt5px">
      <p class="positive f18px zero">
      {{ EventDetail.Model.event.title }}
      </p>
    </div>

    <div class="row flex-v h30px zero pl5p">
      <p class="light-grey f16px zero">
      {{ EventDetail.Model.event.address }}
      </p>
    </div>

   <!-- stars -->
    <div class="row zero dark-grey-bb pl5p pr5p flex-v mt2px h66px">

      <div class="col zero">
        <p class="f14px light-grey center mb15px">
         별점
        </p>
        <div class="row zero mb5px">
          <div class="col zero">
            <div class="f10px center positive"
              ng-class="{
                'ion-star': EventDetail.Model.event.averageStars >= 0.5,
                'ion-android-star-outline': 
                  (EventDetail.Model.event.averageStars < 0.5) ||
                  !Eventdetail.Model.event.averageStars
              }"
            ></div>
          </div>
          <div class="col zero">
            <div class="f10px center positive"
              ng-class="{
                'ion-star': EventDetail.Model.event.averageStars >= 1.5,
                'ion-android-star-outline': 
                  (EventDetail.Model.event.averageStars < 1.5) ||
                  !Eventdetail.Model.event.averageStars
              }"
            ></div>
          </div>
          <div class="col zero">
            <div class="f10px center positive"
              ng-class="{
                'ion-star': EventDetail.Model.event.averageStars >= 2.5,
                'ion-android-star-outline': 
                  (EventDetail.Model.event.averageStars < 2.5) ||
                  !Eventdetail.Model.event.averageStars
              }"
            ></div>
          </div>
          <div class="col zero">
            <div class="f10px center positive"
              ng-class="{
                'ion-star': EventDetail.Model.event.averageStars >= 3.5,
                'ion-android-star-outline': 
                  (EventDetail.Model.event.averageStars < 3.5) ||
                  !Eventdetail.Model.event.averageStars
              }"
            ></div>
          </div>
          <div class="col zero">
            <div class="f10px center positive"
              ng-class="{
                'ion-star': EventDetail.Model.event.averageStars >= 4.5,
                'ion-android-star-outline': 
                  (EventDetail.Model.event.averageStars < 4.5) ||
                  !Eventdetail.Model.event.averageStars
              }"
            ></div>
          </div>
        </div>
        <p class="zero positive center f14px">
         {{ EventDetail.Model.event.averageStars }}
        </p>
      </div>

      <div class="col zero flex">
        <div>
          <p class="f14px light-grey center mb10px">
          좋아요
          </p>
          <div class="row zero mb5px">
            <div class="col zero right">
              <div class="ion-heart positive f18px"></div>
            </div>
            <div class="col zero left ml5px">
              <div class="positive f16px">
                {{ EventDetail.Model.event.likes || 0 }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- photo1 -->
    <img class="w100p block" alt="이벤트 이미지 1"
      ng-if="EventDetail.Model.event.photos[1]"
      ng-src="{{EventDetail.Model.event.photos[1].url | Cloudinary600}}"
    >
    <!-- photo2 -->
    <img class="w100p block" alt="이벤트 이미지 2"
      ng-if="EventDetail.Model.event.photos[2]"
      ng-src="{{EventDetail.Model.event.photos[2].url | Cloudinary600}}"
    >
    <!-- photo3 -->
    <img class="w100p block" alt="이벤트 이미지 3"
      ng-if="EventDetail.Model.event.photos[3]"
      ng-src="{{EventDetail.Model.event.photos[3].url | Cloudinary600}}"
    >
    <!-- photo4 -->
    <img class="w100p block" alt="이벤트 이미지 4"
      ng-if="EventDetail.Model.event.photos[4]"
      ng-src="{{EventDetail.Model.event.photos[4].url | Cloudinary600}}"
    >
    <!-- photo5 -->
    <img class="w100p block" alt="이벤트 이미지 5"
      ng-if="EventDetail.Model.event.photos[5]"
      ng-src="{{EventDetail.Model.event.photos[5].url | Cloudinary600}}"
    >
  </ion-content>
  

  <ion-footer-bar class="bar-positive footer zero">
    <div class="row zero">
      <div class="col-50 flex"
        ng-if="!Favorite.isFavorite(EventDetail.Model.event.id)"
        ng-click="Favorite.likeEvent(EventDetail.Model.event)"
      >
        <div class="ion-heart f26px"></div>
        <p class="zero left ml10px f18px">
          좋아요
        </p>
      </div>

      <div class="col-50 flex"
        ng-if="Favorite.isFavorite(EventDetail.Model.event.id)"
        ng-click="Favorite.unlikeEvent(EventDetail.Model.event)"
      >
        <div class="ion-heart f26px red"></div>
        <p class="zero left ml10px f18px red">
        좋아요 취소
        </p>
      </div>

      <div class="col-50 flex light-grey-bl"
        ng-click="goToState('Main.EventReview', {
          event: EventDetail.Model.event.id,
          eventTitle: EventDetail.Model.event.title
        }, 'forward')"
      >
        <div class="ion-chatbubble-working f26px"></div>
        <p class="zero left ml10px f18px">
          리뷰보기
        </p>
      </div>
    </div>
  </ion-footer-bar>
  
</ion-view>